jobs:
  fmt:
    function: dev_actions/fmt:main
    targets:
      - app
      - server

  lint:
    command: "pylint ."
    targets: all

  ping:
    command: "echo ping <pinger-name>"
    targets: all
    context:
      pinger-name: Joel

  boot:
    script: ../boot

  clean:
    function: prod_actions/clean:main
    context:
      clean_dirs:
        - build
        - dist
        - multi_job.egg-info
    skips: app

  pypi-upload:
    function: prod_actions/pypi_upload:main
    context:
      release_type: patch
      twine_username: joellefkowitz

projects:
  app:
    path: ../app

  server:
    path: ../server
    context:
      pinger-name: Steve

routines:
  dev:
    - fmt
    - lint
