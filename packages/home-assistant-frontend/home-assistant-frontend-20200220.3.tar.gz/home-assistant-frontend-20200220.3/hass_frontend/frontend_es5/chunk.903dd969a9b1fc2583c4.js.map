{"version":3,"sources":["webpack:///./src/data/camera.ts","webpack:///./src/panels/lovelace/components/hui-image.ts","webpack:///./src/common/util/parse-aspect-ratio.ts","webpack:///./src/data/auth.ts"],"names":["CAMERA_SUPPORT_STREAM","computeMJPEGStreamUrl","entity","concat","entity_id","attributes","access_token","fetchThumbnailUrlWithCache","hass","entityId","timeCachePromiseFunc","fetchThumbnailUrl","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","path","wrap","_context","prev","next","getSignedPath","sent","abrupt","hassUrl","stop","_x","_x2","apply","this","arguments","fetchStreamUrl","_ref2","_callee2","format","data","stream","_context2","type","callWS","url","_x3","_x4","_x5","fetchCameraPrefs","updateCameraPrefs","prefs","Object","assign","_decorate","customElement","_initialize","_LitElement","HuiImage","_LitElement2","_getPrototypeOf2","_this","_classCallCheck","_len","length","args","Array","_key","_getPrototypeOf","call","_assertThisInitialized","_inherits","F","d","kind","decorators","property","key","value","query","_get","prototype","_attached","cameraImage","cameraView","_startUpdateCameraInterval","_stopUpdateCameraInterval","imageSrc","cameraObj","ratio","aspectRatio","parseAspectRatio","stateObj","states","undefined","state","imageFallback","stateImage","_cameraImageSrc","image","filter","stateFilter","STATES_OFF","includes","html","_templateObject","styleMap","paddingBottom","w","h","toFixed","classMap","Boolean","_templateObject2","_templateObject3","_onImageError","_onImageLoad","display","_loadError","height","_lastImageHeight","changedProps","has","_updateCameraImageSrc","_this2","_cameraUpdater","window","setInterval","clearInterval","_onImageLoad2","updateComplete","_image","offsetHeight","_updateCameraImageSrc2","static","css","_templateObject4","LitElement","__webpack_require__","__webpack_exports__","parseOrThrow","num","parsed","parseFloat","isNaN","Error","input","endsWith","substr","arr","replace","split","err","fetchAuthProviders","location","protocol","host","fetch","credentials"],"mappings":"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","file":"chunk.903dd969a9b1fc2583c4.js","sourcesContent":["import { HomeAssistant, CameraEntity } from \"../types\";\nimport { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\nimport { getSignedPath } from \"./auth\";\n\nexport const CAMERA_SUPPORT_ON_OFF = 1;\nexport const CAMERA_SUPPORT_STREAM = 2;\n\nexport interface CameraPreferences {\n  preload_stream: boolean;\n}\n\nexport interface CameraThumbnail {\n  content_type: string;\n  content: string;\n}\n\nexport interface Stream {\n  url: string;\n}\n\nexport const computeMJPEGStreamUrl = (entity: CameraEntity) =>\n  `/api/camera_proxy_stream/${entity.entity_id}?token=${entity.attributes.access_token}`;\n\nexport const fetchThumbnailUrlWithCache = (\n  hass: HomeAssistant,\n  entityId: string\n) =>\n  timeCachePromiseFunc(\n    \"_cameraTmbUrl\",\n    9000,\n    fetchThumbnailUrl,\n    hass,\n    entityId\n  );\n\nexport const fetchThumbnailUrl = async (\n  hass: HomeAssistant,\n  entityId: string\n) => {\n  const path = await getSignedPath(hass, `/api/camera_proxy/${entityId}`);\n  return hass.hassUrl(path.path);\n};\n\nexport const fetchThumbnail = (hass: HomeAssistant, entityId: string) => {\n  // tslint:disable-next-line: no-console\n  console.warn(\"This method has been deprecated.\");\n  return hass.callWS<CameraThumbnail>({\n    type: \"camera_thumbnail\",\n    entity_id: entityId,\n  });\n};\n\nexport const fetchStreamUrl = async (\n  hass: HomeAssistant,\n  entityId: string,\n  format?: \"hls\"\n) => {\n  const data = {\n    type: \"camera/stream\",\n    entity_id: entityId,\n  };\n  if (format) {\n    // @ts-ignore\n    data.format = format;\n  }\n  const stream = await hass.callWS<Stream>(data);\n  stream.url = hass.hassUrl(stream.url);\n  return stream;\n};\n\nexport const fetchCameraPrefs = (hass: HomeAssistant, entityId: string) =>\n  hass.callWS<CameraPreferences>({\n    type: \"camera/get_prefs\",\n    entity_id: entityId,\n  });\n\nexport const updateCameraPrefs = (\n  hass: HomeAssistant,\n  entityId: string,\n  prefs: {\n    preload_stream?: boolean;\n  }\n) =>\n  hass.callWS<CameraPreferences>({\n    type: \"camera/update_prefs\",\n    entity_id: entityId,\n    ...prefs,\n  });\n","import { STATES_OFF } from \"../../../common/const\";\n\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  CSSResult,\n  css,\n  PropertyValues,\n  query,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fetchThumbnailUrlWithCache } from \"../../../data/camera\";\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = \"grayscale(100%)\";\n\nexport interface StateSpecificConfig {\n  [state: string]: string;\n}\n\n@customElement(\"hui-image\")\nexport class HuiImage extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public entity?: string;\n\n  @property() public image?: string;\n\n  @property() public stateImage?: StateSpecificConfig;\n\n  @property() public cameraImage?: string;\n\n  @property() public cameraView?: \"live\" | \"auto\";\n\n  @property() public aspectRatio?: string;\n\n  @property() public filter?: string;\n\n  @property() public stateFilter?: StateSpecificConfig;\n\n  @property() private _loadError?: boolean;\n\n  @property() private _cameraImageSrc?: string;\n\n  @query(\"img\") private _image!: HTMLImageElement;\n\n  private _lastImageHeight?: number;\n\n  private _cameraUpdater?: number;\n\n  private _attached?: boolean;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._attached = true;\n    if (this.cameraImage && this.cameraView !== \"live\") {\n      this._startUpdateCameraInterval();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._attached = false;\n    this._stopUpdateCameraInterval();\n  }\n\n  protected render(): TemplateResult {\n    const ratio = this.aspectRatio ? parseAspectRatio(this.aspectRatio) : null;\n    const stateObj =\n      this.hass && this.entity ? this.hass.states[this.entity] : undefined;\n    const state = stateObj ? stateObj.state : \"unavailable\";\n\n    // Figure out image source to use\n    let imageSrc: string | undefined;\n    let cameraObj: CameraEntity | undefined;\n    // Track if we are we using a fallback image, used for filter.\n    let imageFallback = !this.stateImage;\n\n    if (this.cameraImage) {\n      if (this.cameraView === \"live\") {\n        cameraObj =\n          this.hass && (this.hass.states[this.cameraImage] as CameraEntity);\n      } else {\n        imageSrc = this._cameraImageSrc;\n      }\n    } else if (this.stateImage) {\n      const stateImage = this.stateImage[state];\n\n      if (stateImage) {\n        imageSrc = stateImage;\n      } else {\n        imageSrc = this.image;\n        imageFallback = true;\n      }\n    } else {\n      imageSrc = this.image;\n    }\n\n    if (imageSrc) {\n      imageSrc = this.hass!.hassUrl(imageSrc);\n    }\n\n    // Figure out filter to use\n    let filter = this.filter || \"\";\n\n    if (this.stateFilter && this.stateFilter[state]) {\n      filter = this.stateFilter[state];\n    }\n\n    if (!filter && this.entity) {\n      const isOff = !stateObj || STATES_OFF.includes(state);\n      filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n    }\n\n    return html`\n      <div\n        style=${styleMap({\n          paddingBottom:\n            ratio && ratio.w > 0 && ratio.h > 0\n              ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n              : \"\",\n        })}\n        class=${classMap({\n          ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),\n        })}\n      >\n        ${this.cameraImage && this.cameraView === \"live\"\n          ? html`\n              <ha-camera-stream\n                .hass=\"${this.hass}\"\n                .stateObj=\"${cameraObj}\"\n              ></ha-camera-stream>\n            `\n          : html`\n              <img\n                id=\"image\"\n                src=${imageSrc}\n                @error=${this._onImageError}\n                @load=${this._onImageLoad}\n                style=${styleMap({\n                  filter,\n                  display: this._loadError ? \"none\" : \"block\",\n                })}\n              />\n            `}\n        <div\n          id=\"brokenImage\"\n          style=${styleMap({\n            height: `${this._lastImageHeight || \"100\"}px`,\n            display: this._loadError ? \"block\" : \"none\",\n          })}\n        ></div>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"cameraImage\") && this.cameraView !== \"live\") {\n      this._updateCameraImageSrc();\n      this._startUpdateCameraInterval();\n      return;\n    }\n  }\n\n  private _startUpdateCameraInterval(): void {\n    this._stopUpdateCameraInterval();\n    if (this.cameraImage && this._attached) {\n      this._cameraUpdater = window.setInterval(\n        () => this._updateCameraImageSrc(),\n        UPDATE_INTERVAL\n      );\n    }\n  }\n\n  private _stopUpdateCameraInterval(): void {\n    if (this._cameraUpdater) {\n      clearInterval(this._cameraUpdater);\n    }\n  }\n\n  private _onImageError(): void {\n    this._loadError = true;\n  }\n\n  private async _onImageLoad(): Promise<void> {\n    this._loadError = false;\n    await this.updateComplete;\n    this._lastImageHeight = this._image.offsetHeight;\n  }\n\n  private async _updateCameraImageSrc(): Promise<void> {\n    if (!this.hass || !this.cameraImage) {\n      return;\n    }\n\n    const cameraState = this.hass.states[this.cameraImage] as\n      | CameraEntity\n      | undefined;\n\n    if (!cameraState) {\n      this._onImageError();\n      return;\n    }\n\n    this._cameraImageSrc = await fetchThumbnailUrlWithCache(\n      this.hass,\n      this.cameraImage\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image\": HuiImage;\n  }\n}\n","// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = (num) => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\n\nexport default function parseAspectRatio(input: string) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1\n      ? { w: parseOrThrow(arr[0]), h: 1 }\n      : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}\n","import { HomeAssistant } from \"../types\";\n\nexport interface AuthProvider {\n  name: string;\n  id: string;\n  type: string;\n}\n\nexport interface Credential {\n  type: string;\n}\n\nexport interface SignedPath {\n  path: string;\n}\n\nexport const hassUrl = `${location.protocol}//${location.host}`;\n\nexport const getSignedPath = (\n  hass: HomeAssistant,\n  path: string\n): Promise<SignedPath> => hass.callWS({ type: \"auth/sign_path\", path });\n\nexport const fetchAuthProviders = () =>\n  fetch(\"/auth/providers\", {\n    credentials: \"same-origin\",\n  });\n"],"sourceRoot":""}