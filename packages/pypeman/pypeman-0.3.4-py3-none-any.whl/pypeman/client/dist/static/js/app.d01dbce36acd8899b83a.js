webpackJsonp([1],{"/9jW":function(t,e,n){"use strict";var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"channel-list"},t._l(t.channels,function(e){return n("li",{key:e.name},[n("div",{staticClass:"row",on:{click:function(n){n.stopPropagation(),t.handleRowClick(e)}}},[n("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"store"},[e.has_message_store?n("router-link",{attrs:{"router-link":"",to:{name:"messagestore",params:{channelName:e.name}}}},[t._v("\n          Show messages\n        ")]):t._e()],1),t._v(" "),n("div",{staticClass:"processed"},[t._v("\n          "+t._s(e.processed_msgs)+" message(s)\n      ")]),t._v(" "),n("div",{staticClass:"status"},[t._v("\n          "+t._s(e.status)+"\n          ("),"WAITING"===e.status?n("a",{attrs:{color:"red"},on:{click:function(n){n.stopPropagation(),t.changeState(e,"stop")}}},[t._v("Stop")]):t._e(),t._v(" "),"STOPPED"===e.status?n("a",{attrs:{color:"green"},on:{click:function(n){n.stopPropagation(),t.changeState(e,"start")}}},[t._v("Start")]):t._e(),t._v(")\n      ")]),t._v(" "),n("div",{staticClass:"showsubs"},[e.subchannels.length&&!e.showSub?n("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("keyboard_arrow_down")]):t._e(),t._v(" "),e.subchannels.length&&e.showSub?n("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("keyboard_arrow_up")]):t._e()])]),t._v(" "),e.showSub?n("div",[e.subchannels&&e.subchannels.length?n("channel-list",{attrs:{channels:e.subchannels}}):t._e()],1):t._e()])}))},staticRenderFns:[]};e.a=a},"7oKO":function(t,e){},"7zck":function(t,e){},"9cYo":function(t,e,n){"use strict";var a=n("//Fk"),s=n.n(a),i=n("oxE8"),r=n.n(i),o=n("pwNs");e.a={install:function(t,e){var n=e.url,a=new r.a(n);t.prototype.$clientcall=function(t,e){return new s.a(function(n,s){"closed"===a.status?a.open().then(function(){a.call(t,e).then(function(t){n(t)},function(s){console.log("Error while doing request but keep retrying",s),a.call(t,e).then(function(t){n(t)},function(t){o.a.$emit("clienterror",t)})})}):a.call(t,e).then(function(t){n(t)},function(s){console.log("Error while doing request but keep retrying",s),a.open().then(function(){a.call(t,e).then(function(t){n(t)},function(t){o.a.$emit("clienterror",t)})})})})}}}},ICfi:function(t,e,n){"use strict";e.a={name:"MessageStore",created:function(){this.channelName=this.$route.params.channelName,this.loadMessages()},watch:{$route:function(t,e){},pagination:{handler:function(){this.loadMessages()},deep:!0}},methods:{loadMessages:function(){var t=this;this.loading=!0;var e=(this.pagination.page-1)*this.pagination.rowsPerPage,n=[this.channelName,e,this.pagination.rowsPerPage];null!==this.pagination.sortBy&&n.push((this.pagination.descending?"":"-")+this.pagination.sortBy),this.$clientcall("list_msg",n).then(function(e){t.messages=e.messages,t.totalItems=e.total,t.loading=!1})},replayMessage:function(t){var e=this;this.$clientcall("replay_msg",[this.channelName,[t.id]]).then(function(t){var n={success:0,error:0};t.forEach(function(t){t.hasOwnProperty("error")?n.error++:n.success++}),n.error?(e.color="error",e.statusMessage="Replay failed for "+n.error+" message(s)"):(e.color="success",e.statusMessage="Replay successfully for "+n.success+" message(s)"),e.replayed=!0,window.setTimeout(e.loadMessages,1e3)})},toggleOrder:function(){this.pagination.descending=!this.pagination.descending}},computed:{pages:function(){return Math.ceil(this.totalItems/this.pagination.rowsPerPage)}},data:function(){return{channelName:null,messages:[],replayed:!1,loading:!0,color:"success",statusMessage:"",totalItems:0,headers:[{text:"Timestamp",align:"left",value:"timestamp"},{text:"Message ID",align:"left",value:"id"},{text:"State",value:"state"},{text:"Action",value:"action"}],pagination:{sortBy:"timestamp",descending:!0,page:1,rowsPerPage:10}}}}},M93x:function(t,e,n){"use strict";var a=n("xJD8"),s=n("WKOZ"),i=function(t){n("m3Xy")},r=n("VU/8")(a.a,s.a,!1,i,null,null);e.a=r.exports},N9i4:function(t,e,n){"use strict";var a=n("Xjqi");e.a={name:"Channels",created:function(){this.loadChannels()},components:{"channel-list":a.a},methods:{loadChannels:function(){var t=this;this.$clientcall("channels",[]).then(function(e){t.channels=e},this.showError)}},data:function(){return{channels:[]}}}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("+5wz"),i=n.n(s),r=n("M93x"),o=n("YaEn"),c=n("3EgV"),l=n.n(c),u=n("9cYo"),h=n("7zck"),v=(n.n(h),n("iP1m")),d=(n.n(v),n("wj96")),p=n.n(d);a.a.config.productionTip=!1,a.a.use(l.a),a.a.use(u.a,{url:p.a.serverConfig}),a.a.use(i.a,p.a),new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:r.a}})},OZGO:function(t,e,n){"use strict";var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"channels",attrs:{sm12:""}},[e("h2",[this._v("Channel list")]),this._v(" "),e("channel-list",{attrs:{channels:this.channels}})],1)],1)},staticRenderFns:[]};e.a=a},WKOZ:function(t,e,n){"use strict";var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"pypeman",dark:""}},[n("v-navigation-drawer",{attrs:{app:"",fixed:"",temporary:"",clipped:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-list",[n("v-list-tile",[n("v-list-tile-title",{staticClass:"title"},[t._v("\n            Menu\n          ")])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{attrs:{dense:""}},t._l(t.items,function(e){return n("v-list-tile",{key:e.title,attrs:{"router-link":"",to:e.route}},[e.icon?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}))],1),t._v(" "),n("v-toolbar",{attrs:{app:"",fixed:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",[t._v("Pypeman admin")])],1),t._v(" "),n("main",[n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1),t._v(" "),n("v-footer",{attrs:{app:""}}),t._v(" "),n("v-snackbar",{attrs:{timeout:2e3,top:!0,"multi-line":"multi-line",color:"error"},model:{value:t.clientError,callback:function(e){t.clientError=e},expression:"clientError"}},[t._v("\n    An error while doing server query.\n  ")])],1)},staticRenderFns:[]};e.a=a},Xjqi:function(t,e,n){"use strict";var a=n("g6en"),s=n("/9jW"),i=function(t){n("mM2Q")},r=n("VU/8")(a.a,s.a,!1,i,"data-v-b0830a4a",null);e.a=r.exports},YaEn:function(t,e,n){"use strict";var a=n("7+uW"),s=n("/ocq"),i=n("iMQK"),r=n("x5a2");a.a.use(s.a),e.a=new s.a({routes:[{path:"/",redirect:"/channels"},{path:"/channels",name:"channels",component:i.a},{path:"/channel/:channelName/message-store",name:"messagestore",component:r.a}]})},efnc:function(t,e){},g6en:function(t,e,n){"use strict";var a=n("7+uW"),s=n("Xjqi");e.a={name:"channel-list",props:["channels","folded"],created:function(){},components:{"channel-list":s.a},methods:{changeState:function(t,e){this.$clientcall(e+"_channel",[t.name]).then(function(e){t.status=e.status},this.showError)},handleRowClick:function(t){a.a.set(t,"showSub",!t.showSub)},showError:function(t){console.log("Error while calling server",t)}},data:function(){return{headers:[{text:"Channel name",align:"left",value:"name"},{text:"Processed Msgs",value:"processed_msgs"},{text:"Status",value:"status"},{text:"Subchannels",value:"subchannel"},{text:"Msg store",value:"msgstore"}],pagination:{sortBy:"name"}}}}},hr5J:function(t,e,n){"use strict";var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"channels",attrs:{sm12:""}},[n("h2",[t._v("Messages for channel <"+t._s(t.channelName)+">")]),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.messages,pagination:t.pagination,loading:t.loading,"total-items":t.totalItems,"hide-actions":"","item-key":"id"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("tr",t._l(e.headers,function(e){return n("th",{key:e.text,class:["column sortable",t.pagination.descending?"desc":"asc",e.value===t.pagination.sortBy?"active":""],on:{click:function(n){t.changeSort(e.value)}}},[n("v-icon",[t._v("arrow_upward")]),t._v("\n            "+t._s(e.text)+"\n          ")],1)}))]}},{key:"items",fn:function(e){return[n("tr",{on:{click:function(t){e.expanded=!e.expanded}}},[n("td",[t._v(t._s(e.item.timestamp))]),t._v(" "),n("td",[t._v(t._s(e.item.id))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.state))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[n("v-btn",{attrs:{color:"blue"},on:{click:function(n){n.stopPropagation(),t.replayMessage(e.item)}}},[t._v("Replay")])],1)])]}},{key:"expand",fn:function(e){return[n("v-card",{attrs:{flat:""}},[n("v-card-text",[t._v(t._s(e.item.message))])],1)]}}])}),t._v(" "),n("div",{staticClass:"text-xs-center pt-2"},[n("v-pagination",{attrs:{length:t.pages},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1),t._v(" "),n("v-snackbar",{attrs:{timeout:2e3,top:!0,"multi-line":"multi-line",color:t.color},model:{value:t.replayed,callback:function(e){t.replayed=e},expression:"replayed"}},[t._v("\n    "+t._s(t.statusMessage)+"\n  ")])],1)},staticRenderFns:[]};e.a=a},iMQK:function(t,e,n){"use strict";var a=n("N9i4"),s=n("OZGO"),i=function(t){n("7oKO")},r=n("VU/8")(a.a,s.a,!1,i,"data-v-339fe346",null);e.a=r.exports},iP1m:function(t,e){},m3Xy:function(t,e){},mM2Q:function(t,e){},pwNs:function(t,e,n){"use strict";var a=n("7+uW");e.a=new a.a},wj96:function(t,e){t.exports=configs},x5a2:function(t,e,n){"use strict";var a=n("ICfi"),s=n("hr5J"),i=function(t){n("efnc")},r=n("VU/8")(a.a,s.a,!1,i,"data-v-8ffd2af8",null);e.a=r.exports},xJD8:function(t,e,n){"use strict";var a=n("pwNs");e.a={name:"app",created:function(){var t=this;a.a.$on("clienterror",function(e){console.log("Pypeman client error: ",e),t.clientError=!0})},data:function(){return{drawer:!1,clientError:!1,items:[{title:"Channel list",icon:null,route:{name:"channels"}}]}}}}},["NHnr"]);
//# sourceMappingURL=app.d01dbce36acd8899b83a.js.map